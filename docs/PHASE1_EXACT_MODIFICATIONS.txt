# Phase 1 ç²¾ç¡®ä»£ç æ”¹åŠ¨æ–¹æ¡ˆ

## ğŸ“‹ æ”¹åŠ¨æ±‡æ€»

### æ–‡ä»¶ 1: config.json - æ‰©å±• production èŠ‚ç‚¹

**å½“å‰å†…å®¹**:
```json
"production": {
  "initial_capital": 3000000,
  "entry_strategy": "SimpleScorerStrategy",
  "exit_strategy": "ATRExitStrategy",
  "monitor_list_file": "data/production_monitor_list.json",
  "state_file": "production_state.json",
  "max_positions": 5,
  "max_position_pct": 0.30
}
```

**æ”¹ä¸º**:
```json
"production": {
  "monitor_list_file": "data/production_monitor_list.json",
  "state_file": "production_state.json",
  "signal_file_pattern": "signals_{date}.json",
  "report_file_pattern": "trade_report_{date}.md",
  "history_file": "trade_history.json",
  "max_positions_per_group": 5,
  "max_position_pct": 0.30,
  "buy_threshold": 65,
  "strategy_groups": [
    {
      "id": "default",
      "name": "Default Strategy Group",
      "initial_capital": 3000000,
      "entry_strategy": "SimpleScorerStrategy",
      "exit_strategy": "LayeredExitStrategy"
    }
  ]
}
```

**æ”¹åŠ¨è¯´æ˜**:
- åˆ é™¤: `initial_capital`ï¼ˆç§»åˆ°æ¯ä¸ªç­–ç•¥ç»„å†…ï¼‰
- åˆ é™¤: `entry_strategy`, `exit_strategy`ï¼ˆç§»åˆ°æ¯ä¸ªç­–ç•¥ç»„å†…ï¼‰
- åˆ é™¤: `max_positions`ï¼ˆæ”¹åä¸º max_positions_per_groupï¼‰
- æ–°å¢: `signal_file_pattern`
- æ–°å¢: `report_file_pattern`
- æ–°å¢: `history_file`
- æ–°å¢: `buy_threshold`
- æ–°å¢: `strategy_groups[]` æ•°ç»„

---

### æ–‡ä»¶ 2: data/production_monitor_list.json - æ–°å»º

**è·¯å¾„**: `data/production_monitor_list.json`  
**ç±»å‹**: æ–°å»ºæ–‡ä»¶

**å†…å®¹**:
```json
{
  "version": "1.0",
  "last_updated": "2026-01-21",
  "description": "Production trading monitor list",
  "tickers": [
    "8035",
    "8306",
    "7974",
    "7011",
    "6861",
    "8058",
    "6501",
    "4063",
    "7203",
    "4568",
    "6098",
    "1321"
  ]
}
```

**è¯´æ˜**: åˆå§‹åŒ–ä¸ºæ ¸å¿ƒ12åªè‚¡ç¥¨ï¼Œç”¨æˆ·å¯è‡ªè¡Œä¿®æ”¹

---

### æ–‡ä»¶ 3: production_state.json - é¦–æ¬¡è¿è¡Œæ—¶è‡ªåŠ¨ç”Ÿæˆ

**è·¯å¾„**: `production_state.json`  
**ç±»å‹**: é¦–æ¬¡è¿è¡Œæ—¶ç”Ÿæˆï¼ˆ`trade prepare` å‘½ä»¤ï¼‰

**åˆå§‹å†…å®¹æ¨¡æ¿** (å½“æ–‡ä»¶ä¸å­˜åœ¨æ—¶è‡ªåŠ¨åˆ›å»º):
```json
{
  "last_updated": "2026-01-21T00:00:00",
  "strategy_groups": [
    {
      "id": "default",
      "name": "Default Strategy Group",
      "initial_capital": 3000000,
      "cash": 3000000,
      "positions": []
    }
  ]
}
```

**è¯´æ˜**: 
- é¦–æ¬¡è¿è¡Œæ—¶ä» config.json çš„ strategy_groups è‡ªåŠ¨åˆå§‹åŒ–
- æ¯ä¸ªç­–ç•¥ç»„ä» initial_capital å¼€å§‹
- positions æ•°ç»„åˆå§‹ä¸ºç©º

**åç»­æ›´æ–°æ ¼å¼** (è¿è¡Œ `trade record` å):
```json
{
  "last_updated": "2026-01-21T20:30:00",
  "strategy_groups": [
    {
      "id": "default",
      "name": "Default Strategy Group",
      "initial_capital": 3000000,
      "cash": 2500000,
      "positions": [
        {
          "ticker": "8035",
          "entry_price": 31500,
          "entry_date": "2026-01-21",
          "entry_score": 75.2,
          "quantity": 100,
          "peak_price": 37200
        }
      ]
    }
  ]
}
```

---

### æ–‡ä»¶ 4: signals_YYYY-MM-DD.json - è¿è¡Œæ—¶ç”Ÿæˆ

**è·¯å¾„**: `signals_{date}.json`ï¼ˆå¦‚ signals_2026-01-21.jsonï¼‰  
**ç±»å‹**: è¿è¡Œ `trade prepare` æ—¶ç”Ÿæˆï¼Œæ— è„‘è¦†ç›–

**å†…å®¹ç»“æ„**:
```json
{
  "date": "2026-01-21",
  "generated_at": "2026-01-21T20:30:00",
  "strategy_groups": [
    {
      "group_id": "default",
      "group_name": "Default Strategy Group",
      "entry_strategy": "SimpleScorerStrategy",
      "exit_strategy": "LayeredExitStrategy",
      "cash_available": 2500000,
      "buy_signals": [
        {
          "ticker": "4568",
          "score": 78.5,
          "signal_strength": "STRONG_BUY",
          "current_price": 5230,
          "suggested_quantity": 100,
          "estimated_cost": 523000,
          "reason": "æŠ€æœ¯é¢å¼ºåŠ¿ï¼Œæœºæ„æŒç»­ä¹°å…¥ï¼ŒROEæ”¹å–„",
          "breakdown": {
            "technical": 85.0,
            "institutional": 75.0,
            "fundamental": 80.0,
            "volatility": 72.0
          }
        }
      ],
      "sell_signals": [
        {
          "ticker": "6501",
          "action": "SELL_50%",
          "urgency": "MEDIUM",
          "current_quantity": 100,
          "suggested_quantity": 50,
          "current_price": 12800,
          "entry_price": 13200,
          "reason": "æŠ€æœ¯é¢èµ°å¼±ï¼Œè·Œç ´EMA20",
          "profit_loss_pct": -3.0,
          "holding_days": 8
        }
      ]
    }
  ]
}
```

**å…³é”®å­—æ®µè¯´æ˜**:
- `buy_signals[]`: æ•°ç»„ï¼Œæ¯ä¸ªå¯¹è±¡ä»£è¡¨ä¸€ä¸ªä¹°å…¥å»ºè®®
  - `suggested_quantity`: å»ºè®®ä¹°å…¥æ•°é‡ï¼ˆæ ¹æ®ç°é‡‘å’Œèµ„é‡‘ç®¡ç†è§„åˆ™è®¡ç®—ï¼‰
  - `estimated_cost`: é¢„ä¼°æˆæœ¬ï¼ˆprice Ã— quantityï¼‰
  - `breakdown`: åˆ†æ•°è¯¦æƒ…ï¼ˆç”¨äºæŠ¥å‘Šå±•ç¤ºï¼‰
- `sell_signals[]`: æ•°ç»„ï¼Œæ¯ä¸ªå¯¹è±¡ä»£è¡¨ä¸€ä¸ªå–å‡ºå»ºè®®
  - `current_quantity`: å½“å‰æŒä»“æ•°é‡
  - `suggested_quantity`: å»ºè®®å–å‡ºæ•°é‡

---

### æ–‡ä»¶ 5: trade_history.json - é¦–æ¬¡ä¸ºç©º

**è·¯å¾„**: `trade_history.json`  
**ç±»å‹**: é¦–æ¬¡è¿è¡Œåˆ›å»ºï¼Œåç»­è¿½åŠ 

**åˆå§‹å†…å®¹**:
```json
{
  "trades": []
}
```

**è¿è¡Œ `trade record` åçš„å†…å®¹**:
```json
{
  "trades": [
    {
      "date": "2026-01-21",
      "strategy_group_id": "default",
      "action": "BUY",
      "ticker": "8035",
      "price": 31500,
      "quantity": 100,
      "total": 3150000,
      "notes": ""
    },
    {
      "date": "2026-01-21",
      "strategy_group_id": "default",
      "action": "SELL",
      "ticker": "6501",
      "price": 12800,
      "quantity": 50,
      "total": 640000,
      "entry_price": 13200,
      "profit": -20000,
      "profit_pct": -3.0,
      "holding_days": 8,
      "notes": ""
    }
  ]
}
```

**å…³é”®å­—æ®µè¯´æ˜**:
- `strategy_group_id`: å…³é”®å­—æ®µï¼Œç”¨äºåŒºåˆ†æ˜¯å“ªä¸ªç­–ç•¥ç»„çš„äº¤æ˜“
- `entry_price`: ä»…å–å‡ºæ—¶æœ‰ï¼Œç”¨äºè®¡ç®—ç›ˆäº
- `profit`, `profit_pct`, `holding_days`: ä»…å–å‡ºæ—¶æœ‰

---

### æ–‡ä»¶ 6: trade_report_YYYY-MM-DD.md - è¿è¡Œæ—¶ç”Ÿæˆ

**è·¯å¾„**: `trade_report_{date}.md`ï¼ˆå¦‚ trade_report_2026-01-21.mdï¼‰  
**ç±»å‹**: è¿è¡Œ `trade prepare` æ—¶ç”Ÿæˆï¼ŒMarkdown æ ¼å¼

**å†…å®¹ç»“æ„**:
```markdown
# äº¤æ˜“ç­–ç•¥æŠ¥å‘Š
**æ—¥æœŸ**: 2026-01-21  
**ç”Ÿæˆæ—¶é—´**: 2026-01-21 20:30:00

---

## ç­–ç•¥ç»„: Default Strategy Group
**ç­–ç•¥**: SimpleScorerStrategy â†’ LayeredExitStrategy  
**å¯ç”¨ç°é‡‘**: Â¥2,500,000

### ğŸ“Š å½“å‰æŒä»“ï¼ˆ2åªï¼‰

| è‚¡ç¥¨ | æ•°é‡ | å…¥åœºä»· | å½“å‰ä»· | ç›ˆäº% | æŒæœ‰å¤©æ•° | å…¥åœºæ—¥æœŸ |
|------|------|--------|--------|-------|---------|----------|
| 8035 | 100 | Â¥31,500 | Â¥37,200 | +18.1% | 47 | 2025-12-05 |
| 7974 | 200 | Â¥5,820 | Â¥6,100 | +4.8% | 13 | 2026-01-08 |

**æ€»å¸‚å€¼**: Â¥4,940,000  
**æµ®åŠ¨ç›ˆäº**: +Â¥680,000 (+16.0%)

---

### ğŸ“ˆ ä¹°å…¥ä¿¡å·ï¼ˆ2ä¸ªï¼‰

**ğŸ’° ç°é‡‘ä½™é¢**: Â¥2,500,000

1. **4568 ç¬¬ä¸€ä¸‰å…± - 78.5åˆ† (STRONG_BUY)**
   - å½“å‰ä»·: Â¥5,230
   - å»ºè®®æ•°é‡: 100è‚¡
   - é¢„ä¼°æˆæœ¬: Â¥523,000
   - âœ… ç°é‡‘å……è¶³ï¼ˆå‰©ä½™ Â¥1,977,000ï¼‰
   - ç†ç”±: æŠ€æœ¯é¢å¼ºåŠ¿ï¼Œæœºæ„æŒç»­ä¹°å…¥ï¼ŒROEæ”¹å–„
   - åˆ†æ•°è¯¦æƒ…: æŠ€æœ¯85.0 + æœºæ„75.0 + åŸºæœ¬é¢80.0 + æ³¢åŠ¨æ€§72.0

2. **7011 ä¸‰è±é‡å·¥ - 71.2åˆ† (BUY)**
   - å½“å‰ä»·: Â¥2,180
   - å»ºè®®æ•°é‡: 200è‚¡
   - é¢„ä¼°æˆæœ¬: Â¥436,000
   - âœ… ç°é‡‘å……è¶³ï¼ˆå‰©ä½™ Â¥1,541,000ï¼‰
   - ç†ç”±: EMAé‡‘å‰ï¼Œé˜²å«è®¢å•å¢é•¿
   - åˆ†æ•°è¯¦æƒ…: æŠ€æœ¯75.0 + æœºæ„68.0 + åŸºæœ¬é¢72.0 + æ³¢åŠ¨æ€§65.0

---

### ğŸ”´ å–å‡ºå»ºè®®ï¼ˆ1ä¸ªï¼‰

1. **6501 æ—¥ç«‹ - SELL_50% (MEDIUM)**
   - å½“å‰ä»·: Â¥12,800
   - å½“å‰æŒæœ‰: 100è‚¡
   - å»ºè®®å–å‡º: 50è‚¡
   - é¢„ä¼°æ”¶å…¥: Â¥640,000
   - å…¥åœºä»·: Â¥13,200
   - ç›ˆäº: -50è‚¡ Ã— (Â¥12,800 - Â¥13,200) = -Â¥20,000 (-3.0%)
   - æŒæœ‰å¤©æ•°: 8å¤©
   - ç†ç”±: æŠ€æœ¯é¢èµ°å¼±ï¼Œè·Œç ´EMA20

---

âœ… ä¿¡å·å·²ä¿å­˜: signals_2026-01-21.json
âœ… æŠ¥å‘Šå·²ä¿å­˜: trade_report_2026-01-21.md
```

---

## ğŸ” æ•°æ®å®Œæ•´æ€§æ£€æŸ¥

**éœ€è¦ç¡®ä¿çš„é€»è¾‘**:

1. **ç­–ç•¥ç»„å”¯ä¸€æ€§**
   - config.json ä¸­æ¯ä¸ªç­–ç•¥ç»„çš„ id å¿…é¡»å”¯ä¸€
   - production_state.json ä¸­çš„ç­–ç•¥ç»„ id å¿…é¡»ä¸ config.json ä¸€è‡´

2. **ç°é‡‘è®¡ç®—**
   - åˆå§‹ç°é‡‘ = initial_capital
   - æ¯æ¬¡ä¹°å…¥ï¼šcash -= price Ã— quantity
   - æ¯æ¬¡å–å‡ºï¼šcash += price Ã— quantity
   - å–å‡ºæ—¶è®¡ç®—ç›ˆäºï¼šprofit = (sell_price - entry_price) Ã— quantity

3. **FIFO å¤„ç†**
   - éƒ¨åˆ†å–å‡ºæ—¶ï¼Œä¿æŒåŸ entry_priceï¼ˆä¸æ”¹ï¼‰
   - å®Œå…¨å–å‡ºæ—¶åˆ é™¤æŒä»“è®°å½•

4. **å¤šç­–ç•¥ç»„ç‹¬ç«‹æ€§**
   - åŒä¸€è‚¡ç¥¨å¯åœ¨ä¸åŒç­–ç•¥ç»„æŒæœ‰
   - äº¤æ˜“å†å²ä¸­ strategy_group_id ç”¨äºåŒºåˆ†
   - æŒä»“çŠ¶æ€åˆ†åˆ«ç®¡ç†ç°é‡‘å’Œ positions

---

## âœ… Phase 1 ç¡®è®¤æ¸…å•

å®æ–½å‰éœ€ç¡®è®¤ï¼š

1. **config.json æ”¹åŠ¨**
   - [ ] production èŠ‚ç‚¹ç»“æ„æ­£ç¡®ï¼Ÿ
   - [ ] strategy_groups æ ¼å¼ï¼ˆid, name, initial_capital, entry_strategy, exit_strategyï¼‰æ»¡è¶³éœ€æ±‚ï¼Ÿ
   - [ ] buy_threshold é»˜è®¤å€¼ 65 æ˜¯å¦åˆé€‚ï¼Ÿ

2. **production_monitor_list.json**
   - [ ] åˆå§‹ 12 åªè‚¡ç¥¨åˆ—è¡¨æ˜¯å¦éœ€è¦è°ƒæ•´ï¼Ÿ
   - [ ] æ–‡ä»¶ä½ç½® data/production_monitor_list.json å¯ä»¥æ¥å—ï¼Ÿ

3. **production_state.json**
   - [ ] åˆå§‹åŒ–é€»è¾‘ï¼šé¦–æ¬¡è¿è¡Œæ—¶ä» config.json è‡ªåŠ¨åˆ›å»ºï¼Ÿ
   - [ ] æŒä»“å­—æ®µï¼ˆentry_price, entry_date, entry_score, quantity, peak_priceï¼‰æ˜¯å¦å®Œæ•´ï¼Ÿ

4. **signals_YYYY-MM-DD.json**
   - [ ] æŒ‰æ—¥æœŸç”Ÿæˆç‹¬ç«‹æ–‡ä»¶ï¼ˆæ— è„‘è¦†ç›–ï¼‰ï¼Ÿ
   - [ ] æ¯ä¸ªç­–ç•¥ç»„ç‹¬ç«‹çš„ buy_signals/sell_signalsï¼Ÿ
   - [ ] breakdown å­—æ®µç”¨äºè¯¦ç»†åˆ†æ•°å±•ç¤ºï¼Ÿ

5. **trade_history.json**
   - [ ] æ‰€æœ‰äº¤æ˜“è¿½åŠ ï¼Œæ°¸ä¸åˆ é™¤ï¼Ÿ
   - [ ] strategy_group_id å­—æ®µè¶³ä»¥åŒºåˆ†å¤šç­–ç•¥ç»„ï¼Ÿ

6. **trade_report_YYYY-MM-DD.md**
   - [ ] Markdown æ ¼å¼å¯ä»¥æ¥å—ï¼Ÿ
   - [ ] ç°é‡‘ä½™é¢é€é¡¹å±•ç¤ºï¼ˆæ”¯æŒç°é‡‘æ˜¯å¦å……è¶³åˆ¤æ–­ï¼‰ï¼Ÿ
   - [ ] FIFO å¤„ç†ï¼šå–å‡ºæ—¶ä¿æŒåŸ entry_priceï¼Ÿ

---

**ç¡®è®¤æ— è¯¯åï¼Œæˆ‘ä»¬å¼€å§‹å®æ–½ Phase 1**
